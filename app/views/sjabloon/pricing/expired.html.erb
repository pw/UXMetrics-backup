<% content_for :page_title, "Billing" %>

<div class="mt-16 max-w-2xl mx-auto">
  <% if current_user.trialend? %>
    <h1 class="text-3xl mb-4 text-center">Your trial has expired.</h1>
    <p class="mb-8 text-lg text-gray-700 text-center">To continue using Userdrive activate a paid plan below.</p>
  <% else %>
    <h1 class="text-3xl mb-4 text-center">Your early access has ended.</h1>
    <p class="mb-8 text-lg text-gray-700 text-center">We hope you enjoyed Userdrive and we appreciate your input in it's development.<br/>To continue using Userdrive activate a paid plan below.</p>
  <% end %>



  <div data-controller="sjabloon--plan-switch" data-sjabloon--plan-switch-interval="month">


    <div class="flex mb-4 justify-center flex-col sm:flex-row">


      <% if @plans.each do |plan| %>


        <div class="flex flex-col h-full w-full sm:w-1/2 <% if plan.nickname == "Yearly" %>mr-4<% end %> p-4 bg-gray-200 rounded sm:mt-0 mt-4">
          <header class="py-4 text-left px-4 mb-4 text-left">
            <h2 class="mb-0 text-base font-bold text-gray-700 mb-2 hidden">Userdrive <%= plan.nickname %></h2>

            <% if plan.nickname == "Yearly" %>
              <div class="block bg-green-400 text-white font-bold text-sm p-2 rounded px-3 mx-auto -mt-8 rounded-t-none absolute" style=" width:120px; text-align:center;">BEST VALUE</div>
            <% end %>

            <h3 class="flex items-center mt-8">
              <span class="inline-block mr-0 text-5xl font-extrabold text-center">$</span>
              <% if plan.nickname == "Yearly" %>
                <span class="text-5xl font-extrabold" data-target="sjabloon--plan-switch.amount" data-plan-switch-month-amount="<%= plan.price %>" data-plan-switch-year-amount="<%= annual_price_for(plan.id) %>">8</span>

              <% else %>
                <span class="text-5xl font-extrabold" data-target="sjabloon--plan-switch.amount" data-plan-switch-month-amount="<%= plan.price %>" data-plan-switch-year-amount="<%= annual_price_for(plan.id) %>"><%= plan.price %></span>

              <% end %>
            </h3>
            <% if plan.nickname == "Yearly" %>
              <span class="block text-base text-gray-500 -mt-2" data-target="sjabloon--plan-switch.interval">monthly - <strong>$<%= plan.price %> billed annually</strong></span>
            <% else %>
              <span class="block text-base text-gray-500 -mt-2" data-target="sjabloon--plan-switch.interval"><%= plan.interval %>ly</span>
            <% end %>
          </header>
          <ul class="list-reset">
            <% plan.features.each do |key, value| %>
              <li class="flex items-center mb-2 text-xl text-gray-700">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-4 p-2 bg-green-200 text-green-700 fill-current rounded-full") %>
                <%= plan_item(key, value) %>
              </li>
            <% end %>
          </ul>
          <% if plan.nickname == "Yearly" %>
            <!-- <ul class="list-reset">
              <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
                All features
              </li>
              <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
                Unlimited tests
              </li>
              <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
                Unlimited results
              </li>
              <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
                Custom logo
              </li>
              <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
                <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
                Excellent support
              </li>
            </ul> -->
          <% else %>

          <!-- <ul class="list-reset">
            <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
              <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
              All features
            </li>
            <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
              <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
              5 tests / month
            </li>
            <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
              <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
              Unlimited results
            </li>
            <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
              <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
              Custom logo
            </li>
            <li class="flex items-center text-sm font-bold text-gray-700 bg-gray-200 px-2 py-1 rounded">
              <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
              Excellent support
            </li>
          </ul> -->

          <% end %>

          <div class="mt-4">
            <%= plan_button(plan.id) %>


            <%= tag.span "Starts with a #{plan.trial_period_days}-day trial period", class: "block mt-1 text-sm text-center text-gray-700" if plan.has_trial_period? %>
          </div>
        </div>
      <% end.empty? %>
        <%= tag.code "You can fetch your subscription plans from Stripe by running `rake stripe:fetch:plans` from the console. Be sure you have your Stripe credentials added and your products + pricing plans set up in your Stripe account." if Rails.env.development? %>
      <% end %>
    </div>
  </div>

  <div class="h-full w-1/2 mr-4 p-8 bg-gray-200 rounded w-full">
    <h2 class="text-2xl font-bold mb-4 ml-2">Both plans include:</h2>
    <div class="flex">
      <ul class="list-reset flex-col w-1/2">
        <li class="flex items-center text-sm font-bold text-gray-700 py-1 rounded">
          <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
          All features
        </li>
        <li class="flex items-center text-sm font-bold text-gray-700 py-1 rounded">
          <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
          Unlimited tests
        </li>
        <li class="flex items-center text-sm font-bold text-gray-700 py-1 rounded">
          <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
          Unlimited results
        </li>
      </ul>
      <ul class="list-reset flex-col w-1/2">
        <li class="flex items-center text-sm font-bold text-gray-700 py-1 rounded">
          <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
          Custom logo
        </li>
        <li class="flex items-center text-sm font-bold text-gray-700 py-1 rounded">
          <%= embedded_svg("checkmark.svg", class: "inline-block flex-shrink-0 w-8 h-8 mr-1 p-2 text-green-500 fill-current rounded-full") %>
          Excellent support
        </li>
      </ul>
    </div>

  </div>

  <div class="faqs mt-8 mb-24  px-8">
    <p class="mb-2 text-sm font-medium uppercase tracking-wider text-blue-500 mb-8">Common questions</p>
    <h2 class="text-2xl font-bold">Do you offer discounts?</h2>
    <p>We offer free accounts for teachers and students. <a href="mailto:support@userdrive.co?cc=zsolt@userdrive.co&subject=Education%20discount">Get in touch</a> for more details.</p>

    <h2 class="text-2xl font-bold mt-10">Will I be charged when my trial is up?</h2>
    <p>No. We don't ask for payment details upfront. We'll only need your payment information when your 7 trial expires and you want to continue using Userdrive.</p>

    <h2 class="text-2xl font-bold mt-10">Can I cancel at any time?</h2>
    <p>Yes. There's no minimum contract and you can cancel at any time.</p>
  </div>
</div>
